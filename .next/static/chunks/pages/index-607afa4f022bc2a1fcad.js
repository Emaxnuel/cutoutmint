(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{56124:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r,s,o,a=n(15861),c=n(87757),i=n.n(c),u=n(67294),l=n(9669),d=n.n(l),h=n(82025),p=n(7687),f=n(18457),x=n(3283),m=n.n(x),w=n(85893),v=n(3283);function g(){var e=(0,u.useState)([]),t=e[0],n=e[1],c=(0,u.useState)("not-loaded"),l=c[0],x=c[1];(0,u.useEffect)((function(){if("undefined"!==typeof window.ethereum)window.ethereum.request({method:"eth_requestAccounts"}),r=new v(window.ethereum);else{var e=new v.providers.HttpProvider("https://rinkeby.infura.io/v3/3be8ee0f25324e1cbcf6e35f00f5b3ce");r=new v(e)}g()}),[]);var g=function(){var e=(0,a.Z)(i().mark((function e(){var t,s,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new r.eth.Contract(p.Mt,h.k);case 2:return t=e.sent,e.next=5,new r.eth.Contract(f.Mt,h.A);case 5:return s=e.sent,console.log("Metodos",p.Mt),console.log("Metodos",f.Mt),e.next=10,s.methods.fetchMyNFTs().call();case 10:return o=e.sent,console.log("Token Contract est\xe1 en",t.options.address),console.log("Market Contract est\xe1 en",s.options.address),console.log("Esta es la data",o),e.next=16,Promise.all(o.map(function(){var e=(0,a.Z)(i().mark((function e(n){var r,s,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.tokenURI(n.tokenId).call();case 2:return r=e.sent,e.next=5,d().get(r);case 5:return s=e.sent,o=m().utils.fromWei(n.price,"ether"),a={price:o,tokenId:n.tokenId,seller:n.seller,owner:n.owner,image:s.data.image,name:s.data.name,description:s.data.description},console.log("El item es ",a),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 16:c=e.sent,n(c),x("loaded");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,a.Z)(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return e.next=4,new v(window.ethereum);case 4:return n=e.sent,e.next=7,n.eth.getAccounts();case 7:return s=e.sent,o=s[0],e.next=11,new n.eth.Contract(f.Mt,h.A);case 11:return r=e.sent,a=m().utils.toWei(t.price.toString(),"ether"),e.next=15,r.methods.createMarketSale(h.k,t.tokenId).send({from:o,value:a});case 15:e.sent,g();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return"loaded"!==l||t.length?(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("div",{className:"px-4",style:{maxWidth:"1600px"},children:(0,w.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 pt-4",children:t.map((function(e,t){return(0,w.jsxs)("div",{className:"border shadow rounded-xl overflow-hidden",children:[(0,w.jsx)("img",{src:e.image}),(0,w.jsxs)("div",{className:"p-4",children:[(0,w.jsx)("p",{style:{height:"64px"},className:"text-2xl font-semibold",children:e.name}),(0,w.jsx)("div",{style:{height:"70px",overflow:"hidden"},children:(0,w.jsx)("p",{className:"text-gray-400",children:e.description})})]}),(0,w.jsxs)("div",{className:"p-4 bg-black",children:[(0,w.jsx)("p",{className:"text-m mb-4 text-white",children:"Puja Actual"}),(0,w.jsxs)("p",{className:"text-2xl mb-4 font-bold text-white",children:[e.price," ETH"]}),(0,w.jsx)("button",{className:"w-full bg-black-500 text-white font-bold py-2 px-12 rounded",onClick:function(){return k(e)},children:"Oferta"})]})]},t)}))})})}):(0,w.jsx)("h1",{className:"textoCutout px-20 py-10 text-3xl",children:"No hay items"})}},78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(56124)}])}},function(e){e.O(0,[482,291,669,944,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);