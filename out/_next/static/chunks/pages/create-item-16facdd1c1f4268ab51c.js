(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[779],{42605:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(4942),c=n(15861),a=n(87757),s=n.n(a),o=n(67294),u=n(3283),i=n.n(u),p=n(85241),f=n(11163),l=n(82025),d=n(91141),h=n(63520),m=n(85893);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w,g,x,k=n(3283),y=(0,p.create)("https://ipfs.infura.io:5001/api/v0");function j(){(function(){var e=(0,c.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"undefined"===typeof window.ethereum){e.next=7;break}return e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:w=new k(window.ethereum),e.next=9;break;case 7:t=new k.providers.HttpProvider("https://rinkeby.infura.io/v3/3be8ee0f25324e1cbcf6e35f00f5b3ce"),w=new k(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.next=16,w.eth.getAccounts();case 16:g=e.sent,x=g[0],console.log("MetamaskAccount",x);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()();var e=(0,o.useState)(null),t=e[0],n=e[1],r=(0,o.useState)({price:"",name:"",description:""}),a=r[0],u=r[1],p=(0,f.useRouter)();console.log("Esta es nftaddress",l.k),console.log("Esta es nftmarketaddress",l.A);var v=function(){var e=(0,c.Z)(s().mark((function e(t){var r,c,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.files[0],e.prev=1,e.next=4,y.add(r,{progress:function(e){return console.log("received: ".concat(e))}});case 4:c=e.sent,a="https://ipfs.infura.io/ipfs/".concat(c.path),n(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,c.Z)(s().mark((function e(){var n,r,c,o,u,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.name,r=a.description,c=a.price,n&&r&&c&&t){e.next=3;break}return e.abrupt("return");case 3:return o=JSON.stringify({name:n,description:r,image:t}),e.prev=4,e.next=7,y.add(o);case 7:u=e.sent,i="https://ipfs.infura.io/ipfs/".concat(u.path),O(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("Error al subir el archivo: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,c.Z)(s().mark((function e(t){var n,r,c,o,u,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new w.eth.Contract(d.Mt,l.k);case 2:return n=e.sent,e.next=5,n.methods.createToken(t).send({from:x});case 5:return r=e.sent,e.next=8,r.events.Transfer.returnValues[2];case 8:return c=e.sent,o=i().utils.toWei(a.price,"ether"),e.next=12,new w.eth.Contract(h.Mt,l.A);case 12:return u=e.sent,e.next=15,u.methods.getListingPrice().call({from:x});case 15:return f=(f=e.sent).toString(),e.next=19,u.methods.createMarketItem(l.k,c,o).send({from:x,value:f});case 19:r=e.sent,console.log("Market Item",r),p.push("/");case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,m.jsx)("div",{className:"flex justify-center",children:(0,m.jsxs)("div",{className:"w-1/2 flex flex-col pb-12",children:[(0,m.jsx)("input",{placeholder:"Nombre del NFT",className:"mt-8 border rounded p-4",onChange:function(e){return u(b(b({},a),{},{name:e.target.value}))}}),(0,m.jsx)("textarea",{placeholder:"Descripci\xf3n",className:"mt-2 border rounded p-4",onChange:function(e){return u(b(b({},a),{},{description:e.target.value}))}}),(0,m.jsx)("input",{placeholder:"Precio de salida",className:"mt-8 border rounded p-4",onChange:function(e){return u(b(b({},a),{},{price:e.target.value}))}}),(0,m.jsx)("input",{type:"file",name:"NFT",className:"my-4",onChange:v}),t&&(0,m.jsx)("img",{className:"rounded mt-4",width:"350",src:t}),(0,m.jsx)("button",{onClick:j,className:"font-bold mt-4 bg-black text-white rounded p-4 shadow-lg",children:"Mint"})]})})}},21932:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-item",function(){return n(42605)}])},47005:function(){},26937:function(){},26784:function(){},88795:function(){}},function(e){e.O(0,[482,291,977,435,774,888,179],(function(){return t=21932,e(e.s=t);var t}));var t=e.O();_N_E=t}]);